<div id="micropost_content_<%= micropost.id -%>">
	<ul>
  		<tr>
  		<!--content-->
  		<%= micropost.content %>
  		<% if !(micropost.photo.url=="/photos/original/missing.png")%>
 			 <%= image_tag micropost.photo%>
 		 <%end%>
   		 
   		 <!--time,user,comment count-->
   		 Posted by <%=link_to micropost.user.name,user_path(micropost.user) unless micropost.user.nil? %> 
    	 <%= time_ago_in_words(micropost.created_at) %> ago.
    	 comments (<%=micropost.microcomments.count%>)
 		 <%=link_to 'show/hide details', micropost_path(micropost),:remote=>true,:id=>"show_micropost_#{micropost.id}",
  		 :onclick=>"$('#micropost_details_#{micropost.id}').toggle();"%>
		 </tr>
	</ul>  
</div>

<!--micropost options:delete,edit,comments-->
<div id="micropost_details_<%= micropost.id -%>" class="micropost">
   
    <!--if is current user-->
	<% if user_signed_in? %>
		<% if micropost.user==current_user%>
		    <!--edit/delete micropost-->
			<%= link_to "Edit",:action=>'edit',:controller=>'microposts',:id=>micropost.id%>
			<%= link_to 'Delete',micropost_path(micropost)+'/delete',:remote=>true,:id=>'destroy_post',
			:onclick=>"$('#micropost_content_#{micropost.id}').fadeOut();
			$('#micropost_details_#{micropost.id}').fadeOut();"%>
		<%end%>
	 	
	 	<!--comments-->	
		<div id="comment_<%=micropost.id -%>">
			<%= render micropost.microcomments%>
		</div>
		
<!--begin of original like/unlike forms-->	
<% @like=Like.find(:all,:conditions => {:user_id=>current_user.id,:micropost_id=>micropost.id})[0]%>	
	
	<% if !@like.nil?%>
	
		<div id="like_label_<%= micropost.id -%>">
			<%= render 'likes/liked_label'%>
		</div>
			
		<div id="unlike_form_<%= micropost.id -%>">
			<%= render :partial=>'likes/unlike_form',:locals=>{:like=>@like,:micropost=>micropost}%>
		</div>
	
	<%else%>
	
		<div id="like_form_<%= micropost.id -%>">
			<%= render :partial=> 'likes/like_form',:locals=>{:micropost => micropost}%>
		</div>
	
	<%end%>
<!--end of original like/unlike forms-->	

<!--for destroy.js.erb-->
	
	<div id="like_form_<%= micropost.id -%>_destroy"></div>	
		
<!--for create.js.erb-->
	<div id="like_label_<%= micropost.id -%>_create"></div>
	<div id="unlike_form_<%= micropost.id -%>_create"></div>

<%= form_for @microcomment, :url=>micropost_path(micropost),:action=>:add_comment,:remote=>true do |f| %>
		<%= f.text_area :content, placeholder: "enter new comment",:rows=>3 %>
		    <%= fields_for Notification.new do |n|%>
			<%= n.hidden_field :recipient_id, :value => current_user.id %>
			<%= n.hidden_field :micropost_id, :value => micropost.id %>
			<%= n.hidden_field :content, :value => current_user.name+"  has commented on your post!" %>
			<%end%>
		<%= f.submit  %>
		<% end %>
	<%end%>
</div>

